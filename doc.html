<!DOCTYPE html><html><head>
      <title>doc</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\DPC\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.13\crossnote\dependencies\katex\katex.min.css">
      
      
      
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
.markdown-preview.markdown-preview {
  color: black;
}
.markdown-preview.markdown-preview th,
.markdown-preview.markdown-preview td {
  border: 1px solid black;
  color: black;
}
.markdown-preview.markdown-preview th {
  color: red;
}
.markdown-preview.markdown-preview table {
  border-left: 5px outset red;
}
.markdown-preview.markdown-preview pre {
  background: #d8d8d8;
  color: black;
  border-left: 5px solid green;
}
.markdown-preview.markdown-preview code {
  color: black;
  background: #d8d8d8;
}

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h1 id="chương-2-tài-nguyên-của-game">Chương 2: Tài nguyên của game </h1>
<hr>
<h2 id="a-tài-nguyên-game">A. TÀI NGUYÊN GAME </h2>
<h4 id="các-tài-nguyên-của-game-được-lưu-trong-folder-assets-bao-gồm">Các tài nguyên của game được lưu trong folder “assets”, bao gồm: </h4>
<table>
<thead>
<tr>
<th><code>Asset</code></th>
<th>Tài Nguyên</th>
<th>Mô Tả</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Audio</code></td>
<td>Âm thanh</td>
<td>Chứa những file âm thanh dưới định dạng .mp3</td>
</tr>
<tr>
<td><code>Background</code></td>
<td>Hình nền</td>
<td>Chứa những lớp hình nền của các ải trong game</td>
</tr>
<tr>
<td><code>BlockTile</code></td>
<td>Hình khối</td>
<td>Chứa những file hình ảnh của các block tạo thành ải</td>
</tr>
<tr>
<td><code>Decoration</code></td>
<td>Trang trí</td>
<td>Chứa những file hình ảnh nhằm mục đích trang trí ải</td>
</tr>
<tr>
<td><code>Door</code></td>
<td>Cửa</td>
<td>Chứa những file hình ảnh của cửa, các trạng thái mở đóng</td>
</tr>
<tr>
<td><code>HudElement</code></td>
<td>Hiển thị trực quan</td>
<td>Chứa những hình ảnh giao diện luôn hiện trên màn hình chơi</td>
</tr>
<tr>
<td><code>IntroLogo</code></td>
<td>Chứa những hình ảnh xuất hiện khi mở game (nhà phát hành,…)</td>
<td></td>
</tr>
<tr>
<td><code>Menu</code></td>
<td>Menu</td>
<td>Chứa những hình nền, nút bấm ở menu chính</td>
</tr>
<tr>
<td><code>NakuSheet</code></td>
<td>Dải hình nhân vật chính</td>
<td>Chứa những tập hợp các dải hình của người chơi (gồm 2 dải cho 2 hướng trái, phải)</td>
</tr>
<tr>
<td><code>NpcSheet</code></td>
<td>Dải hình Npc</td>
<td>Chứa những dải hình cho npc</td>
</tr>
<tr>
<td><code>EnemySheet</code></td>
<td>Dải hình kẻ địch</td>
<td>Chứa những hình ảnh của kẻ địch trong game</td>
</tr>
<tr>
<td><code>ParticleSheet</code></td>
<td>Dải hình hiệu ứng</td>
<td>Chứa những dải hình cho các hiệu ứng cháy, nổ, nước bantumlum</td>
</tr>
<tr>
<td><code>PauseScreen</code></td>
<td>Hình tạm ngưng</td>
<td>Chứa những hình nền, nút bấm ở màn hình tạm ngưng game</td>
</tr>
<tr>
<td><code>PopupBubble</code></td>
<td>Bong bóng hiện hình</td>
<td>Gồm các ô hội thoại hướng dẫn người chơi, cốt truyện, ...</td>
</tr>
</tbody>
</table>
<h4 id="lưu-ý">Lưu ý: </h4>
<ul>
<li>Tất cả các file hình ảnh được lưu dưới định dạng .png</li>
<li>Giải thích <em>dải hình</em>: là một dải bao gồm nhiều <code>state</code> (trạng thái) của một hình động, mỗi một <code>state</code> được gán với 1 <em>hình</em> cụ thể của <em>giải hình</em> đó</li>
</ul>
<h2 id="b-mã-nguồn-game">B. MÃ NGUỒN GAME </h2>
<ul>
<li>
<p>Các header file được lưu trong folder <strong><code>include</code></strong></p>
</li>
<li>
<p>Các thư viện được lưu trong folder <strong><code>libraries</code></strong>, bao gồm:</p>
<ul>
<li>SDL2: phụ trách phần nhận <code>input</code> và khởi tạo <code>window</code></li>
<li>SDL_Image: xử lý hoạt ảnh</li>
<li>SFML_Audio: xử lý âm thanh</li>
</ul>
</li>
<li>
<p>Các file <code>.cpp</code> được lưu trong folder <strong><code>src</code></strong></p>
</li>
</ul>
<h2 id="c-thành-phần-chủ-trì">C. THÀNH PHẦN CHỦ TRÌ </h2>
<ul>
<li>Là các thành phần mang tính chất cài đặt, là tiền đề cho sự tồn tại của các thành phần nội dung</li>
</ul>
<h3 id="1-cài-đặt-configuration">1. Cài đặt [<code>Configuration</code>] </h3>
<h4 id="bao-quát">Bao quát </h4>
<ul>
<li>Sử dụng mô hình thiết kế <strong>SINGLETON</strong> đảm bảo sự tồn tại độc nhất vô nhị của bản thân, hạn chế khởi tạo</li>
</ul>
<h4 id="tái-định-nghĩa-define-các-mảng-vector-stdvector">Tái định nghĩa <code>define</code> các mảng vector <code>std::vector</code> </h4>
<ul>
<li>Hỗ trợ cho việc tạo mảng dễ dàng hơn.</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">int1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword keyword-int">int</span><span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">int2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>int1D<span class="token operator">&gt;</span> </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">float1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword keyword-float">float</span><span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">float2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>float1D<span class="token operator">&gt;</span> </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">long1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword keyword-long">long</span><span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">long2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>long1D<span class="token operator">&gt;</span> </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">bool1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword keyword-bool">bool</span><span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">bool2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>bool1D<span class="token operator">&gt;</span> </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">short1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span><span class="token keyword keyword-short">short</span><span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">short2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>short1D<span class="token operator">&gt;</span> </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">string0D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>string </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">string1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>string0D<span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">string2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>string1D<span class="token operator">&gt;</span> </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SDLTexture1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>SDL_Texture<span class="token operator">*</span><span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SDLTexture2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>SDLTexture1D<span class="token operator">&gt;</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SDLRect1D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>SDL_Rect<span class="token operator">&gt;</span> </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SDLRect2D</span> <span class="token expression">std<span class="token double-colon punctuation">::</span>vector<span class="token operator">&lt;</span>SDLRect1D<span class="token operator">&gt;</span></span></span>
</code></pre><h4 id="giao-diện-chuyển-cảnh-struct-transitioneffect">Giao diện chuyển cảnh <code>struct TransitionEffect</code> </h4>
<ul>
<li>Sử dụng để làm đen màn hình khi di chuyển giữa các menu và khu vực nhất định của mỗi ải</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">TransitionEffect</span> 
<span class="token punctuation">{</span> 
    <span class="token comment">// Hình của màn hình đen</span>
    SDL_Texture <span class="token operator">*</span>BLACKSCREEN<span class="token punctuation">;</span>

    <span class="token comment">// Các giá trị diễn tả tiến trình của chuyển cảnh</span>
    <span class="token keyword keyword-float">float</span> side_max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-float">float</span> mid_max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-float">float</span> side_cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> mid_cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// Các giá trị diễn tả trạng thái</span>
    <span class="token keyword keyword-bool">bool</span> active <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-bool">bool</span> fade <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// Các hàm cập nhật</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-void">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword keyword-float">float</span> s<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> m<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> skipStart <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Các điểm kích hoạt</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">leftactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">rightactive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">midpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><ul>
<li><code>Transition</code> chuyển cảnh bao gồm 3 quá trình
<ul>
<li>Làm đen màn hình</li>
<li>Giữ nguyên màn hình đen (dành cho việc thực hiện các thuật toán trong quá trình màn hình đen)</li>
<li>Làm sáng màn hình</li>
</ul>
</li>
</ul>
<h4 id="lớp-cài-đặt-class-configuration">Lớp cài đặt <code>class Configuration</code> </h4>
<h5 id="thành-phần">Thành phần: </h5>
<ul>
<li>
<p>Chứa các thông tin cài đặt của game:</p>
<ul>
<li>Độ phân giải cửa sổ</li>
<li>FPS (Frame per second)</li>
<li>Trạng thái menu</li>
<li>EVENT (sự kiện)</li>
<li>...</li>
</ul>
</li>
<li>
<p>Chứa các phương thức làm việc với cửa sổ</p>
</li>
<li>
<p>Chứa các công cụ debugging</p>
</li>
<li>
<p>Chứa các phương thức làm việc với <code>string</code> và <code>vector</code> để các vật thể <code>object2D</code> khác có thể truy cập dễ dàng</p>
</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Configuration</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span> 

    <span class="token comment">// Các hàm thiết lập/hủy bỏ</span>
    <span class="token operator">~</span><span class="token function">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Configuration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">postupdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Trạng thái game</span>
    <span class="token keyword keyword-bool">bool</span> QUIT <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">/* Danh sách
        0: Menu 
        1: Đang chơi 
        2: Tạm dừng
    */</span>
    <span class="token keyword keyword-short">short</span> STATE <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-void">void</span> <span class="token function">changeState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Thời gian/FPS</span>
    <span class="token keyword keyword-int">int</span> FPS <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-long">long</span> RUNTIME <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-long">long</span> WORLDTIME <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-int">int</span> DELAY_TIME <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-void">void</span> <span class="token function">frameHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Sự kiện</span>
    SDL_Event EVENT<span class="token punctuation">;</span>

    <span class="token comment">// Kích cỡ cửa sổ</span>
    <span class="token keyword keyword-int">int</span> WIDTH <span class="token operator">=</span> <span class="token number">1280</span><span class="token punctuation">,</span> HEIGHT <span class="token operator">=</span> <span class="token number">768</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-void">void</span> <span class="token function">resizeWindow</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> W<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> H<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-void">void</span> <span class="token function">drawFullscreen</span><span class="token punctuation">(</span>SDL_Texture <span class="token operator">*</span>texture<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> whr<span class="token punctuation">,</span> short1D position<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Cửa sổ</span>
    SDL_Window <span class="token operator">*</span>WINDOW <span class="token operator">=</span> <span class="token function">SDL_CreateWindow</span><span class="token punctuation">(</span><span class="token string">"Abyssal Hymn"</span><span class="token punctuation">,</span> SDL_WINDOWPOS_UNDEFINED<span class="token punctuation">,</span>
    SDL_WINDOWPOS_UNDEFINED<span class="token punctuation">,</span> WIDTH<span class="token punctuation">,</span> HEIGHT<span class="token punctuation">,</span> SDL_WINDOW_ALLOW_HIGHDPI<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    SDL_Renderer <span class="token operator">*</span>RENDERER <span class="token operator">=</span> <span class="token function">SDL_CreateRenderer</span><span class="token punctuation">(</span>WINDOW<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    SDL_Surface <span class="token operator">*</span>ICON <span class="token operator">=</span> <span class="token function">SDL_LoadBMP</span><span class="token punctuation">(</span><span class="token string">"assets/icon.bmp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Hàm thao túng texture</span>
    SDL_Texture <span class="token operator">*</span><span class="token function">loadTexture</span><span class="token punctuation">(</span>string0D path<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    SDLTexture1D <span class="token function">loadTextures</span><span class="token punctuation">(</span>string0D path<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Hiệu ứng chuyển cảnh bằng màn hình đen</span>
    TransitionEffect TRANSIT_EFFECT<span class="token punctuation">;</span> 

    <span class="token comment">// Các giá trị/hàm dành cho debug</span>
    string0D PRELOG <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span> 
    string0D DEVLOG <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-void">void</span> <span class="token function">addDevlog</span><span class="token punctuation">(</span>string0D text<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> colorCode<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-void">void</span> <span class="token function">printDevlog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">isComment</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// ====== Các hàm thao túng string và vector ====== </span>

    <span class="token comment">// Cắt string</span>
    <span class="token keyword keyword-static">static</span> string1D <span class="token function">splitStrVec</span><span class="token punctuation">(</span>string0D file_dir<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// 0-Padding: ví dụ: 0 thành 001, 21 thành 021, 121 thành 121... </span>
    <span class="token keyword keyword-static">static</span> string0D <span class="token function">convertZPad</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> number<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> maxNumber<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Thay đổi kích cỡ</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">resizeInt2D</span><span class="token punctuation">(</span>int1D vec<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> r<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> long2D <span class="token function">resizeLong2D</span><span class="token punctuation">(</span>long1D vec<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> r<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> float2D <span class="token function">resizeFloat2D</span><span class="token punctuation">(</span>float1D vec<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> r<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Chuyển hóa </span>
    <span class="token keyword keyword-static">static</span> string1D <span class="token function">convertStr1D</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">,</span> <span class="token keyword keyword-char">char</span> delimiter <span class="token operator">=</span> <span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    <span class="token keyword keyword-static">static</span> int1D <span class="token function">convertStrInt1D</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">,</span> <span class="token keyword keyword-char">char</span> delimiter <span class="token operator">=</span> <span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> long1D <span class="token function">convertStrLong1D</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">,</span> <span class="token keyword keyword-char">char</span> delimiter <span class="token operator">=</span> <span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> float1D <span class="token function">convertStrFloat1D</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">,</span> <span class="token keyword keyword-char">char</span> delimiter <span class="token operator">=</span> <span class="token char">','</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> int1D <span class="token function">convertFloat1DInt</span><span class="token punctuation">(</span>float1D vec<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">convertFloat2DInt</span><span class="token punctuation">(</span>float2D vec<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">// Cờ bạc</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">randomInt</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-static">static</span> int1D <span class="token function">randomInt1D</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> max<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> min <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> shuffle <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</code></pre><h3 id="2-nhập-vào-input">2. Nhập vào [<code>Input</code>] </h3>
<h4 id="trạng-thái-phím-struct-keystate">Trạng thái phím <code>struct KeyState</code> </h4>
<ul>
<li>Lưu trữ trạng thái của mỗi nút <code>key</code>:
<ul>
<li><code>press</code>: nhận bấm 1 lần tức thì, lần thực hiện tiếp xảy ra sau khi thả phím</li>
<li><code>hold</code>: thực hiện liên tục chừng nào phím còn giữ</li>
<li><code>threshold</code>: tương tự <code>hold</code> nhưng chỉ xảy ra sau khi giữ một thời gian nhất định</li>
</ul>
</li>
<li>Bao gồm hàm trực tiếp thao túng <code>input</code> người chơi: <code>script</code></li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">KeyState</span> 
<span class="token punctuation">{</span> 
    SDL_Scancode code<span class="token punctuation">;</span> 

    <span class="token keyword keyword-bool">bool</span> moveset <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-bool">bool</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-bool">bool</span> hold <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-int">int</span> prepress<span class="token punctuation">;</span> 
    <span class="token keyword keyword-bool">bool</span> <span class="token function">press</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-int">int</span> threshold <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> 
        threspeak <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-bool">bool</span> <span class="token function">threspass</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-int">int</span> keydelay <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> Uint8<span class="token operator">*</span> state<span class="token punctuation">,</span> Input <span class="token operator">*</span>input<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    
    <span class="token comment">// Thao túng</span>
    long1D script<span class="token punctuation">;</span> 
    long1D script_history<span class="token punctuation">;</span> 
    string0D <span class="token function">scriptHistoryToStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="phím-mặc-định-struct-keytemplatetempindex">Phím mặc định <code>struct KeyTemplate&lt;TempIndex&gt;</code> </h4>
<ul>
<li>Chứa các cài đặt nút điều khiển mặc định.</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">KeyTemplate</span><span class="token operator">&lt;</span>TempIndex<span class="token operator">&gt;</span>
<span class="token punctuation">{</span>
    KeyState 
        moveU <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        moveD <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        moveL <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        moveR <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        proj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        equip <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        attack <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        jump <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> 
        dash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">&lt;</span>KeyCode<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="trạng-thái-chuột-struct-mousestate">Trạng thái chuột <code>struct MouseState</code> </h4>
<ul>
<li>Xử lý trạng thái nút chuột, tương tự <code>KeyState</code>.</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">MouseState</span> 
<span class="token punctuation">{</span>
    <span class="token keyword keyword-int">int</span> button <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> hold <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-bool">bool</span> <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> threshold <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        threspeak <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-bool">bool</span> <span class="token function">threspass</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> max<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Uint32 mousestate<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="xử-lý-chuột-struct-mousemain">Xử lý chuột <code>struct MouseMain</code> </h4>
<ul>
<li>Gồm trạng thái chuột <code>MouseState</code> cho chuột trái/phải/giữa, vị trí chuột <code>x, y</code> và con lăn <code>W</code></li>
<li>Gồm các hàm tính vị trí chuột trên màn hình và vị trí tương đối so với <code>player</code> / <code>map</code></li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">MouseMain</span> 
<span class="token punctuation">{</span>
    MouseState 
        <span class="token comment">// LEFT MOUSE </span>
        L <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_BUTTON_LEFT<span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token comment">// MIDDLE MOUSE </span>
        M <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_BUTTON_MIDDLE<span class="token punctuation">}</span><span class="token punctuation">,</span> 
        <span class="token comment">// RIGHT MOUSE </span>
        R <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_BUTTON_RIGHT<span class="token punctuation">}</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-short">short</span> W <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-int">int</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token keyword keyword-int">int</span> <span class="token function">offMidX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-int">int</span> <span class="token function">offMidY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-int">int</span> <span class="token function">offPlayerX</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-int">int</span> <span class="token function">offPlayerY</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-int">int</span> <span class="token function">mapX</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> grid <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-int">int</span> <span class="token function">mapY</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> grid <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-bool">bool</span> <span class="token function">inbox</span><span class="token punctuation">(</span>ObjectBox mbox<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="xử-lý-input-tổng-bộ">Xử lý <code>input</code> tổng bộ </h4>
<ul>
<li>Bao gồm các phím <code>key</code> và chuột <code>mouse</code>. Các nút bấm được tạo ra từ <code>keystate</code> sử dụng <code>keytemplate</code> cho các hành động cho người chơi, kèm theo các phím bổ sung</li>
<li>Gồm hàm thực hiện việc thao túng <code>input</code> của người chơi, dành cho những người chơi có hứng thú với việc tạo ra một run chơi hoàn hảo như TAS (Tool Assist Speedrun)</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Input</span> 
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
<span class="token comment">// ============================= KEYSTATE =======================</span>

	KeyState
		<span class="token comment">// Gameplay</span>
		moveU<span class="token punctuation">,</span> moveD<span class="token punctuation">,</span> moveL<span class="token punctuation">,</span> moveR<span class="token punctuation">,</span>
		proj<span class="token punctuation">,</span> equip<span class="token punctuation">,</span> attack<span class="token punctuation">,</span>
		jump<span class="token punctuation">,</span> dash<span class="token punctuation">,</span>

		<span class="token comment">// Other</span>
		lalt <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_LALT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		lctrl <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_LCTRL<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		lshift <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_LSHIFT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		space <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_SPACE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		backspace <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_BACKSPACE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		arrowU <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_UP<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		arrowD <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_DOWN<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		arrowL <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_LEFT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		arrowR <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_RIGHT<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		slash <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_SLASH<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		backslash <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_BACKSLASH<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		escape <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_ESCAPE<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Function Key</span>
		f1 <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_F1<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		f2 <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_F2<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		f3 <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_F3<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		f4 <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_F4<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		f5 <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_F5<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		f6 <span class="token operator">=</span> <span class="token punctuation">{</span>SDL_SCANCODE_F6<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	string0D script_history_full <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-bool">bool</span> script_active <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	MouseMain mouse<span class="token punctuation">;</span>

	<span class="token keyword keyword-int">int</span> delay <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">setTemplate</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> keytemplate<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">executeScript</span><span class="token punctuation">(</span>string0D script_dir<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> from_cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword keyword-void">void</span> <span class="token function">endScript</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	SDL_GameController <span class="token operator">*</span>controller<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="3-âm-thanh-audio">3. Âm thanh [<code>Audio</code>] </h3>
<h4 id="hiệu-ứng-âm-thanh-struct-audiosfx">Hiệu ứng âm thanh <code>struct AudioSFX</code> </h4>
<ul>
<li>Chứa một âm thanh ngắn có thể lặp đi lặp lại theo ý muốn</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">AudioSFX</span> <span class="token punctuation">{</span>
    sf<span class="token double-colon punctuation">::</span>SoundBuffer buffer<span class="token punctuation">;</span>
    sf<span class="token double-colon punctuation">::</span>Sound sound<span class="token punctuation">;</span>

    <span class="token function">AudioSFX</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> std<span class="token double-colon punctuation">::</span>string<span class="token operator">&amp;</span> filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">isPlaying</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">shuffle</span><span class="token punctuation">(</span>AudioSFX1D <span class="token operator">&amp;</span>sfx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="danh-sách-âm-thanh-nền-struct-audioplaylist">Danh sách âm thanh nền <code>struct AudioPlaylist</code> </h4>
<ul>
<li>Chứa một danh sách âm thanh <code>AudioPlaylist</code>, chơi theo một thứ tự lần lượt/ngẫu nhiên (dựa trên cài đặt của người chơi) với một khoảng <code>delay</code> bất kỳ</li>
<li>Bao gồm các hàm phụ trách trạng thái và âm lượng của <code>Audio</code></li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token comment">// Danh sách âm thanh</span>
<span class="token keyword keyword-struct">struct</span> <span class="token class-name">AudioPlaylist</span>
<span class="token punctuation">{</span>
    string1D paths<span class="token punctuation">;</span>
    int1D delays<span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> random <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// Music Track</span>
    <span class="token keyword keyword-int">int</span> m_cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    int1D m_list<span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> delay <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">updatePlaylist</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> fresh <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">comparePlaylist</span><span class="token punctuation">(</span>AudioPlaylist other<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Chơi danh sách đó</span>
<span class="token keyword keyword-class">class</span> <span class="token class-name">Audio</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-bool">bool</span> stop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// Volume</span>
    <span class="token keyword keyword-int">int</span> vol_cur <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> vol_max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    AudioPlaylist playlist<span class="token punctuation">;</span>
    sf<span class="token double-colon punctuation">::</span>Music music_cur<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">Audio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Audio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ============== BACKGROUND MUSIC ==============</span>

    <span class="token comment">// Music Playlist</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">createPlaylist</span><span class="token punctuation">(</span>AudioPlaylist alb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Current Music</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setPlistStop</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setPlistVolCur</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setPlistVolMax</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">getPlistStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getPlistVolCur</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getPlistVolMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">updateTrack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">appendMapPlaylist</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> string0D t_dir<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">isMusicPlaying</span><span class="token punctuation">(</span>sf<span class="token double-colon punctuation">::</span>Music <span class="token operator">&amp;</span>music<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">isSoundPlaying</span><span class="token punctuation">(</span>sf<span class="token double-colon punctuation">::</span>Sound <span class="token operator">&amp;</span>sound<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="4-tạo-hình-renderer">4. Tạo hình [<code>Renderer</code>] </h3>
<h4 id="quản-lý-các-phương-thức-vẽ">Quản lý các phương thức vẽ </h4>
<ul>
<li>Phụ trách cho việc vẽ mọi vật lên màn hình theo một trình tự nhất định:
<ul>
<li>Khởi tạo màu nền</li>
<li>Vẽ hình nền</li>
<li>Vẽ khối nền</li>
<li>Vẽ trang trí nền</li>
<li>Vẽ cửa</li>
<li>Vẽ hiệu ứng</li>
<li>Vẽ địch</li>
<li>Vẽ người chơi</li>
<li>Vẽ đạn</li>
<li>Vẽ khối chính</li>
<li>Vẽ khối ẩn (sẽ giải thích ở phần [<code>block</code>] sắp tới)</li>
<li>Vẽ ô hội thoại</li>
<li>Vẽ trang trí trước mặt</li>
<li>Vẽ hiệu ứng trước mặt</li>
<li>Vẽ hud</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Renderer</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">renderGameplay</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><ul>
<li>Lưu ý: hàm <code>renderGameplay</code> sẽ phụ trách phần vẽ và <strong>CHỈ PHẦN VẼ</strong>, các hàm liên quan đến việc cập nhật thuật toán phức tạp như di chuyển sẽ không bao gồm trong này nhằm phân chia nguồn lực thích hợp, tránh việc hình vẽ bị thiếu đồng bộ.</li>
</ul>
<h3 id="5-vật-thể-2d-object2d">5. Vật thể 2D [<code>Object2D</code>] </h3>
<h4 id="bao-quát-1">Bao quát </h4>
<ul>
<li>1 Abstract Class, Superclass của mọi vật thể 2D trong game (người chơi, hiệu ứng, địch, ...)</li>
</ul>
<h4 id="các-thuộc-tính">Các thuộc tính </h4>
<ul>
<li>
<p>Các thuộc tính của vật thể được chia làm 3 thành phần chính:</p>
<ul>
<li><code>ObjectHitbox</code>: gồm tọa độ <code>x, y</code>, kích cỡ <code>w, h</code> và hitbox <code>hw, hh</code></li>
<li><code>ObjectMovement</code>: phụ trách cho hoạt động di chuyển của vật thể gồm vật tốc: <code>vel_x, vel_y</code> và gia tốc <code>accel_x, accel_y</code></li>
<li><code>ObjectSprite</code>: phụ trách cho hoạt hình của vật thể, là thành phần cần thiết với các vật thể sử dụng dải hình</li>
</ul>
</li>
<li>
<p>Gồm các <code>struct</code> bổ sung nhằm dễ dàng khởi tạo cũng như gán một số giá trị vào</p>
</li>
</ul>
<h4 id="các-thành-phần-bổ-sung">Các thành phần bổ sung </h4>
<ul>
<li>Các <code>struct</code> bổ sung để gói gọn những yếu tố cụ thể của một vật thể:
<ul>
<li>Các <code>ObjectHitbox</code>, <code>ObjectMovement</code>, <code>ObjectSprite</code> kể trên</li>
<li><code>ObjectBox</code>: một hộp phụ trách cho tương tác</li>
<li><code>ObjectXY&lt;datatype&gt;</code>: chứa 2 biến <code>x, y</code> phục vụ mục đích tự do</li>
<li><code>ObjectCombatBox</code>: một hộp dành riêng cho mục đích tấn công</li>
</ul>
</li>
</ul>
<h4 id="các-phương-thức">Các phương thức </h4>
<ul>
<li><code>getter</code> và <code>setter</code> cho tất cả các thuộc tính được kể trên</li>
<li>Các phương thức tĩnh tính khoảng cách <code>distX(), distY(), distR()</code> cũng như tương tác giữa các <code>ObjectBox</code></li>
<li>Các phương thức quản lý tiến trình vẽ dải hình của vật thể <code>setSprite()</code></li>
<li>Các phương thức phụ trách cho việc tấn công</li>
<li>Các phương thức tạo/xóa <code>texture</code></li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Object2D</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> special_key <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token comment">// Size and position</span>
    ObjectHitbox hitbox<span class="token punctuation">;</span>
    <span class="token comment">// Sprite</span>
    ObjectSprite sprite<span class="token punctuation">;</span>
    <span class="token comment">// Movement</span>
    ObjectVel vel<span class="token punctuation">;</span>
    ObjectAccel accel<span class="token punctuation">;</span>

    <span class="token comment">// Combat (if possible)</span>
    ObjectCombatBox combatbox<span class="token punctuation">;</span>

    <span class="token comment">// Ignore Object Existance</span>
    <span class="token keyword keyword-bool">bool</span> ignore <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// Camera Dependencey</span>
    <span class="token keyword keyword-bool">bool</span> cam_depend <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token operator">~</span><span class="token function">Object2D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Default Destructor</span>
    <span class="token function">Object2D</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Default Constructor</span>
    <span class="token function">Object2D</span><span class="token punctuation">(</span>ObjectHitbox box<span class="token punctuation">,</span> ObjectSprite spr <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> ObjectVel v <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> ObjectAccel a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Box</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">insideBox</span><span class="token punctuation">(</span>ObjectBox box<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">insideGridBox</span><span class="token punctuation">(</span>ObjectBox gridbox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    ObjectBox <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// =================== VERY HELPFUL METHOD ======================</span>

    <span class="token comment">// Note!!!: dist is a vector in both direction,</span>
    <span class="token comment">// not the absolute value</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">distX</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>obj1<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj2<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> absolute <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">distY</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>obj1<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj2<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> absolute <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">distBorderX</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>obj1<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">distBorderY</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>obj1<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">distR</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>obj1<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-static">static</span> ObjectBox <span class="token function">SDLRectToBox</span><span class="token punctuation">(</span>SDL_Rect rect<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> SDL_Rect <span class="token function">BoxToSDLRect</span><span class="token punctuation">(</span>ObjectBox box<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">objectIgnore</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>objMain<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>objSub<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">deleteTextures</span><span class="token punctuation">(</span>SDLTexture1D textures<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-bool">bool</span> <span class="token function">setSprite</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> end_lock <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">objectSetSprite</span><span class="token punctuation">(</span>ObjectSprite <span class="token operator">&amp;</span>sprite<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">objectStandardMovement</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> lock_vel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    float1D <span class="token function">objectPredictMovement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="6-bản-đồ-map">6. Bản đồ [<code>Map</code>] </h3>
<h4 id="thông-tin-map-struct-mapinfo">Thông tin map <code>struct MapInfo</code> </h4>
<ul>
<li>Gồm các thông tin liên quan đến map như tên map, độ khó, hình nền chủ đạo, ...</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">MapInformation</span>
<span class="token punctuation">{</span>
    string0D name <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    string0D difficulty <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

    SDL_Texture <span class="token operator">*</span>pause_bg <span class="token operator">=</span> CFG<span class="token operator">-&gt;</span><span class="token function">loadTexture</span><span class="token punctuation">(</span>
        <span class="token string">"assets/PauseScreen/Default.png"</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> pause_ratio <span class="token operator">=</span> <span class="token number">1.77</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">readInfo</span><span class="token punctuation">(</span>string0D dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="thành-phần-map-struct-mapcomponent">Thành phần map <code>struct MapComponent</code> </h4>
<ul>
<li>Gồm các thành phần động tương tác với map như khối <code>block</code>, thực thể <code>entity</code> như người chơi <code>player</code> với địch <code>enemy</code>, hình nền <code>background</code>, trang trí <code>decoration</code>, ...</li>
<li>Các thành phần của map được gói bên trong một <code>std::vector&lt;COMPONENT&gt;</code> tương ứng với các thành phần đó</li>
<li>Gồm các hàm thao túng sự tồn tại của các vật thể, với hàm xóa địa chỉ bộ nhớ động <code>*pointer</code> triệt để</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">MapComponent</span>
<span class="token punctuation">{</span>
    Map <span class="token operator">*</span>map<span class="token punctuation">;</span>
    <span class="token comment">// Directory</span>
    string0D 
        map_dir <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        playlist <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        block_path <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        block_main <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        block_back <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        block_hidden <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        background <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        decor_back <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        decor_front <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        door <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        bubble <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        enemy <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        item <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        audio_obj <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        camera_box <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        transit_map <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">appendDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Append specific</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendPlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendBlockPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendBlockMain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendBlockHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendBlockBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendDecorBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendDecorFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendBubble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendEnemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendAudioObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendCameraBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendTransitMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Clear specific</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearPlaylist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearBlockPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearBlockMain</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearBlockHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearBlockBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearDecorBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearDecorFront</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearBubble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearEnemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearAudioObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearCameraBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">clearTransitMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Delete specific</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseBlockMain</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseBlockBack</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseBlockHidden</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseBackground</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseDecorBack</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseDecorFront</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseDoor</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseBubble</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseEnemy</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseItem</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseAudioObj</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseCameraBox</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">eraseTransitMap</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="lớp-map-tổng-bộ-class-map">Lớp Map tổng bộ <code>class Map</code> </h4>
<ul>
<li>Gồm <code>MapInfo</code> với <code>MapComponent</code> cùng với các thành phần động của map</li>
<li>Gồm các hàm khởi tạo thành phần động bằng phương thức đọc file <code>append&lt;COMPONENT&gt;(string0D địa_chỉ_file_csv_của_thành_phần)</code></li>
<li>Gồm các phương thức khởi tạo <code>init&lt;_&gt;</code> và cập nhật <code>update&lt;_&gt;</code></li>
<li>Các phương thức <code>init&lt;_&gt;</code> và <code>update&lt;_&gt;</code> sẽ tồn tại dưới dạng:
<ul>
<li><code>&lt;Global&gt;</code>: phương thức được thực hiện ở mọi thời điểm mặc cho việc <code>player</code> không có mặt trong <code>map</code></li>
<li><code>&lt;Active&gt;</code>: phương thức chỉ thực hiện với sự có mặt của <code>player</code> trong <code>map</code></li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Map</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// ======== STATE ================</span>
    <span class="token keyword keyword-bool">bool</span> Active <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// ======== DEFAULT ==============</span>
    World <span class="token operator">*</span>WORLD<span class="token punctuation">;</span>
    Audio <span class="token operator">*</span>AUDIO<span class="token punctuation">;</span>
    Collision <span class="token operator">*</span>COLLI<span class="token punctuation">;</span>
    Multiplayer <span class="token operator">*</span>MULTI<span class="token punctuation">;</span>

    <span class="token comment">// ======== MAP INFO =============</span>
    MapInformation MapInfo<span class="token punctuation">;</span>

    <span class="token comment">// ======== MAP COMPONENT ========</span>
    <span class="token comment">// COMPONENT HANDLER</span>
    MapComponent MapComp<span class="token punctuation">;</span>
    <span class="token comment">// Music Album</span>
    AudioPlaylist MapPlaylist<span class="token punctuation">;</span>
    <span class="token comment">// Block Path</span>
    string1D BlockPath<span class="token punctuation">;</span>
    <span class="token comment">// Block Preview Texture</span>
    SDLTexture1D BlockPreview<span class="token punctuation">;</span>
    <span class="token comment">// Enemy</span>
    Enemy1D EnemyVec<span class="token punctuation">;</span>
    <span class="token comment">// Npc</span>
    Bubble1D BubbleVec<span class="token punctuation">;</span>
    <span class="token comment">// Particle_Effect</span>
    Particle1D ParticleBackVec<span class="token punctuation">;</span>
    Particle1D ParticleFrontVec<span class="token punctuation">;</span>
    <span class="token comment">// Block</span>
    Block1D BlockMainVec<span class="token punctuation">;</span>
    Block1D BlockBackVec<span class="token punctuation">;</span>
    Block2D BlockHiddenVec<span class="token punctuation">;</span>
    <span class="token comment">// Yuki Makoto</span>
    Door1D DoorVec<span class="token punctuation">;</span>
    <span class="token comment">// Item</span>
    Item1D ItemVec<span class="token punctuation">;</span>
    <span class="token comment">// Cosmetic</span>
    MapBgColor MapColor<span class="token punctuation">;</span>
    Decoration1D BackgroundVec<span class="token punctuation">;</span>
    Decoration1D DecorBackVec<span class="token punctuation">;</span>
    Decoration1D DecorFrontVec<span class="token punctuation">;</span>
    <span class="token comment">// Projectile</span>
    Projectile1D ProjectileVec<span class="token punctuation">;</span>
    <span class="token comment">// AUDIO SOURCE</span>
    AudioObj1D AudioObjVec<span class="token punctuation">;</span>
    <span class="token comment">// Exclusive update function</span>
    ExclusiveUpdate UpdateExclusive <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// ======== MAP INTERACTION ========</span>
    <span class="token keyword keyword-bool">bool</span> OutsideRender <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    CameraBox1D CameraBox<span class="token punctuation">;</span>
    MapTransit1D TransitMap<span class="token punctuation">;</span>

    <span class="token comment">// =================== Stage stuff idc ===================</span>

    <span class="token operator">~</span><span class="token function">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Map</span><span class="token punctuation">(</span>string0D mapname<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">initMap</span><span class="token punctuation">(</span>World <span class="token operator">*</span>world<span class="token punctuation">,</span> Multiplayer <span class="token operator">*</span>multi<span class="token punctuation">,</span> Audio <span class="token operator">*</span>audio<span class="token punctuation">,</span>
                Collision <span class="token operator">*</span>collision<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> id <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">initMapStandard</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">updateMapActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">updateMapGlobal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ================== MAP ... IDK WHAT ALGORITHM =====================</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">loadCheckpoint</span><span class="token punctuation">(</span>WorldLocation location<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendTransitMap</span><span class="token punctuation">(</span>string0D trans_dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">appendCameraBox</span><span class="token punctuation">(</span>string0D cam_dir<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">appendParticle</span><span class="token punctuation">(</span>ParticleEffect <span class="token operator">*</span>particle<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> front <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="7-đa-người-chơi-multiplayer">7. Đa người chơi [<code>Multiplayer</code>] </h3>
<ul>
<li>Gồm một vector chứa các người chơi <code>std::vector&lt;Player *&gt;</code></li>
<li>Gồm các phương thức điều khiển số lượng / vai trò của người chơi
<ul>
<li><code>addPlayer()</code>, <code>singlePlayer()</code>: thao túng số lượng người chơi</li>
<li><code>changeMain()</code>: thay đổi người chơi chính</li>
</ul>
</li>
<li>Gồm hàm cập nhật các người chơi <code>updatePlayer()</code></li>
<li>Gồm hàm vẽ người chơi <code>drawPlayers()</code> và vẽ hiển thị trực quan (các thông số như máu, năng lượng, ...) <code>drawHuds()</code></li>
</ul>
<h3 id="8-va-chạm-collision">8. Va chạm [<code>Collision</code>] </h3>
<ul>
<li>Một class xử lý sự tương tác va chạm của các người chơi <code>players</code> đối với các thành phần:
<ul>
<li>Khối hộp <code>block</code></li>
<li>Kẻ địch <code>enemy</code></li>
<li>Vật phẩm <code>item</code> (<em>WIP</em>)</li>
</ul>
</li>
<li>Gồm các phương thức liên quan tới tấn công <code>combat</code> và tương tác của các vật thể <code>object2D</code> nói chung</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Collision</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">combatCollision</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>attacker<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>receiver<span class="token punctuation">,</span> int1D offset <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">playerCombatCollision</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>receiver<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> isReceiver <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">playerCollision</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj<span class="token punctuation">,</span> int1D offset <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">objectCollision</span><span class="token punctuation">(</span>Object2D <span class="token operator">*</span>obj1<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj2<span class="token punctuation">,</span> int1D offset <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">hitboxCollision</span><span class="token punctuation">(</span>ObjectHitbox hbox1<span class="token punctuation">,</span> ObjectHitbox hbox2<span class="token punctuation">,</span> int1D offset <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">boxCollision</span><span class="token punctuation">(</span>ObjectBox box1<span class="token punctuation">,</span> ObjectBox box2<span class="token punctuation">,</span> int1D offset <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Phần cập nhật va chạm chính </span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerBlockCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerEnemyCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerItemCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerUpdateCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="9-camera-động-camera">9. Camera động [<code>Camera</code>] </h3>
<ul>
<li>Một class sử dụng để vẽ các vật thể tương đối với vị trí của người chơi, đồng thời kiểm tra các vật nằm ngoài giới hạn màn hình / camera</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Camera</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// For drawing object relative to player</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">objectDrawX</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-int">int</span> <span class="token function">objectDrawY</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Object outside screen</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">outOfBound</span><span class="token punctuation">(</span>SDL_Rect desRect<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">outOfCam</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> Object2D <span class="token operator">*</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="10-hiển-thị-trực-quan-hud">10. Hiển thị trực quan [<code>Hud</code>] </h3>
<ul>
<li><code>class Hud</code> quản lý việc vẽ các trạng thái người chơi, những yếu tố trên màn hình như vạch máu, thể lực.</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Hud</span> <span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-float">float</span> alpha <span class="token operator">=</span> <span class="token number">120</span><span class="token punctuation">;</span> <span class="token comment">// Opacity</span>

    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> bobbing <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> bobbing_direction <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> airbornDisplay <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>

    <span class="token comment">// Hud texture</span>
    SDL_Texture <span class="token operator">*</span>airbornTexture<span class="token punctuation">;</span>

    <span class="token comment">// Head Up texture</span>
    SDL_Texture <span class="token operator">*</span>combatReadyTexture<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>combatDelayTexture<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>combatChargeTexture<span class="token punctuation">;</span>

    SDL_Texture <span class="token operator">*</span>jumpTexture<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>jumpDoubleTexture<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>jumpSuperTexture<span class="token punctuation">;</span>

    SDL_Texture <span class="token operator">*</span>invincibleTexture<span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">Hud</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Hud</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Setter</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setAlpha</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// No Getter</span>

    <span class="token comment">// Alot of drawing</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">drawHeadUpStat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="d-thành-phần-nội-dung">D. THÀNH PHẦN NỘI DUNG </h2>
<ul>
<li>Là các thành phần cụ thể của game, đặt sự quan trọng về tính nội dung cũng như tính năng</li>
</ul>
<h3 id="0-lưu-ý">0. Lưu ý </h3>
<ul>
<li>Các thành phần nội dung thường tồn tại bên trong một <code>std::vector</code> của <code>map</code> nên được định nghĩa <code>define</code> như sau:
<ul>
<li>Giả sử: <code>class Block</code> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"></span><span class="mrel">→</span></span></span></span> <code>#define std::vector&lt;Block*&gt; Block1D</code></li>
</ul>
</li>
</ul>
<h3 id="1-người-chơi-player">1. Người chơi [<code>Player</code>] </h3>
<ul>
<li>Ngôi sao và tâm điểm của cuộc chơi, người chơi là thành phần thực thể <code>entity</code> có lượng logic dày đặc và phức tạp nhất game. Các hành động của người chơi vượt xa di chuyển đơn giản của những con game platformer nửa mùa với chỉ mỗi khả năng đi, nhảy đơn thuần</li>
<li><code>Player</code> kế thừa các đặc tính của <code>Object2D</code></li>
<li>Các hành động, trạng thái của người chơi được gói gọn trong các <code>struct Player&lt;feature&gt;</code> đặc trưng cho 1 đặc tính của người chơi</li>
</ul>
<h4 id="star-các-đặc-tính-của-người-chơi"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋆</mo></mrow><annotation encoding="application/x-tex">\star</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord">⋆</span></span></span></span> Các đặc tính của người chơi: </h4>
<h5 id="-struct-playerstate"># <code>struct PlayerState</code> </h5>
<ul>
<li>Các trạng thái với môi trường của người chơi, cùng với các điều kiện đặc biệt xảy ra từ sự tương tác với môi trường (giả sử: điều kiện &lt;người chơi nhảy khi đang chạy trên băng&gt; sẽ &lt;nhảy thấp hơn nhưng xa hơn&gt;)</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerState</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-bool">bool</span> on_ground <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> on_ice <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> in_water <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-short">short</span> hug_wall <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> crawl_lock <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// Special Condition</span>
    <span class="token keyword keyword-bool">bool</span> jump_on_ice <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">resetState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playermoveset"># <code>struct PlayerMoveset</code> </h5>
<ul>
<li>Trạng thái các kỹ năng của người chơi, mở/khóa</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerMoveset</span>
<span class="token punctuation">{</span>
    <span class="token keyword keyword-bool">bool</span> move <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> jump <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> crawl <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> g_dash <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> a_dash <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> hug_wall <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">enableAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">disableAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playermove"># <code>struct PlayerMove</code> </h5>
<ul>
<li>Sự di chuyển của người chơi trên trục Ox (hướng ngang trái phải) với các giá trị thao túng vận tốc, gia tốc cũng như hitbox</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerMoving</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>
    <span class="token comment">// MOVING</span>
    <span class="token keyword keyword-int">int</span> decel <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> vel_max <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> vel_over_time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// Time you spent over the speed cap</span>
        vel_over_max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span> <span class="token comment">// Max time before speed corretion</span>
    <span class="token keyword keyword-float">float</span> vel_jump_saved <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// CRAWLING</span>
    <span class="token keyword keyword-bool">bool</span> crawl <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> vel_crawl <span class="token operator">=</span> <span class="token number">.8</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> hit_offset_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> hit_offset_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> <span class="token function">hitX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">hitY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playerjump"># <code>struct PlayerJump</code> </h5>
<ul>
<li>Sự di chuyển của người chơi trên trục Oy (hướng dọc trên dưới) với các giá trị thao túng vận tốc, gia tốc trọng trường, độ cao của nhảy, độ cao trần nhà, và cả Coyote Jump (một phương thức phổ biến sử dụng trong game platformer nhằm tạo sự khoan dung cho độ khó trò chơi bằng cách tha thứ cho những input chậm của người chơi)</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerJumping</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>
    <span class="token comment">// Jumping</span>
    <span class="token keyword keyword-int">int</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        max <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> terminal <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">// SUPER JUMPING</span>
    <span class="token keyword keyword-int">int</span> super <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> super_max <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token comment">// Coyote jump (forgiving jump)</span>
    <span class="token keyword keyword-int">int</span> coyote <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> coyote_max <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> coyote_fail <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// Ceiling lock jump</span>
    <span class="token keyword keyword-int">int</span> ceiling_min <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> knockout <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> knockout_delay <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playeradash-và-struct-playergdash"># <code>struct PlayerADash</code> và <code>struct PlayerGDash</code> </h5>
<ul>
<li>Hai kỹ năng của người chơi cho phép tăng tốc đột biến theo hướng ngang nhằm né tránh kẻ thù và khám phá map một cách thoải mái hơn, bao gồm các giá trị thời gian, độ trễ, ...</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerAirDash</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>
    <span class="token comment">// 1 : lock right, -1 : lock left</span>
    <span class="token keyword keyword-short">short</span> lock <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> cur <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> max <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> frame <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerGroundDash</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> super <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> frame <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> delay <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playercombat"># <code>struct PlayerCombat</code> </h5>
<ul>
<li>Trạng thái tấn công của người chơi, với các moveset combat cực kỳ linh hoạt cho phép thực hiện các đòn đánh theo một trình tự cũng như khả năng thay đổi đòn đánh dựa trên môi trường, trạng thái hiện tại người chơi, đấm vỡ mồm lũ sao đỏ Atralis</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerCombat</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>
    <span class="token comment">// Invincibility (is when you are god)</span>
    <span class="token keyword keyword-int">int</span> invincible <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// Invulnerability (is when you get hurt)</span>
    <span class="token keyword keyword-int">int</span> invulnerable <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> invulnerable_max <span class="token operator">=</span> <span class="token number">150</span><span class="token punctuation">;</span>

    <span class="token comment">// Weapon handler</span>
    <span class="token keyword keyword-bool">bool</span> weapon_equip <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> weapon_equip_frame <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// Only use for drawing</span>
    <span class="token keyword keyword-int">int</span> weapon_equip_delay <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> weapon_equip_delay_max <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-float">float</span> combo_time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> charge_time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> delay <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
    <span class="token keyword keyword-float">float</span> parry_error <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playersprite"># <code>struct PlayerSprite</code> </h5>
<ul>
<li>Bao gồm các <code>texture</code> cũng như phương thức để vẽ các dải của người chơi một cách dễ dàng hơn</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerSprite</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> right <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> end_lock <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> alpha <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>

    SDL_Texture <span class="token operator">*</span>CurrentTexture<span class="token punctuation">,</span>
                <span class="token operator">*</span>LeftTexture<span class="token punctuation">,</span>
                <span class="token operator">*</span>RightTexture<span class="token punctuation">,</span>
                <span class="token operator">*</span>LeftWeaponTexture<span class="token punctuation">,</span>
                <span class="token operator">*</span>RightWeaponTexture<span class="token punctuation">;</span>

    SDL_Rect desRect<span class="token punctuation">,</span> srcRect<span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">clearTexture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setSpriteAlpha</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> alp<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">setAct</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> idx<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setSprite</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> m_index<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> m_frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setEndLock</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> lock<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setActSprElock</span><span class="token punctuation">(</span>int1D act<span class="token punctuation">,</span> int1D spr<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> lock <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">drawProp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playercamera"># <code>struct PlayerCamera</code> </h5>
<ul>
<li>Một chiếc camera linh hoạt với khả năng:
<ul>
<li>Khóa màn hình vào điểm cần chú ý / rìa map</li>
<li>Di chuyển tự nhiên với người chơi thay vì khóa một cách cứng nhắc vào tâm màn hình</li>
<li>Tạo các hiệu ứng rung, giật như động đất, dash, ...</li>
<li>Và nhiều yếu tố thú vị khác ...</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerCamera</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>

    <span class="token comment">/*
    Mid: Position Based Camera Offset
  - Based on the player's position
    Shift: The Camera Shift (include Effect and Ease)
  - Based on the player's movement
    Center_Off: The Average Position of the Players
  - Based on the number of players

    Offset: The True Camera Offset (include Mid, Shift and Center_Off)
    */</span>

    ObjectXY mid<span class="token punctuation">;</span>
    ObjectXY center_off<span class="token punctuation">;</span> 
    ObjectXYf focus_trigger<span class="token punctuation">;</span>
    ObjectXYb unfocus<span class="token punctuation">;</span>
    ObjectXY unfocus_offset<span class="token punctuation">;</span>
    ObjectXY offset<span class="token punctuation">;</span>

    <span class="token comment">// Camera Shift Effect</span>
    ObjectXYf shift<span class="token punctuation">;</span>
    ObjectXYf ease<span class="token punctuation">;</span>
    ObjectXYf effect<span class="token punctuation">;</span>

    <span class="token comment">/*
    Most of the time camera will not snap to the player
    but ease to the player when encounter changes
    */</span>

    <span class="token comment">// Goal Value</span>
    ObjectBox focus_dir<span class="token punctuation">;</span>
    ObjectBox focus_point<span class="token punctuation">;</span>
    ObjectBox focus_border<span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> outside_render <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// Progress Value</span>
    ObjectBox focus_true<span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> focus_speed <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> focus_snap <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    ObjectXYf <span class="token function">getShift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ObjectXY <span class="token function">getCenterOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ObjectXYf <span class="token function">getFocusTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">setCameraBorder</span><span class="token punctuation">(</span>ObjectBox f_dir<span class="token punctuation">,</span> ObjectBox f_val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setCameraFocus</span><span class="token punctuation">(</span>ObjectBox f_dir<span class="token punctuation">,</span> ObjectBox f_val<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> gr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerCameraFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">updateStatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">updateDynamic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="-struct-playersfx"># <code>struct PlayerSFX</code> </h5>
<ul>
<li>Bao gồm các phương thức tạo hiệu ứng âm thanh dựa trên môi trường tương tác người chơi</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">PlayerSFX</span>
<span class="token punctuation">{</span>
    Player <span class="token operator">*</span>player<span class="token punctuation">;</span>

    <span class="token comment">// Walking</span>
    <span class="token keyword keyword-int">int</span> walk_step <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> walk_sprite <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> walk_index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    AudioSFX walk0 <span class="token operator">=</span> <span class="token function">AudioSFX</span><span class="token punctuation">(</span><span class="token string">"assets/Audio/PlayerSFX/walk0.mp3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AudioSFX walk1 <span class="token operator">=</span> <span class="token function">AudioSFX</span><span class="token punctuation">(</span><span class="token string">"assets/Audio/PlayerSFX/walk1.mp3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    AudioSFX walk2 <span class="token operator">=</span> <span class="token function">AudioSFX</span><span class="token punctuation">(</span><span class="token string">"assets/Audio/PlayerSFX/walk2.mp3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">updateWalkSFX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Bổ sung sau này ...</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">updateSFX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><h4 id="người-chơi-tổng-bộ-class-player">Người chơi tổng bộ <code>class Player</code> </h4>
<ul>
<li>Bao gồm các đặc tính kể trên, cùng với các phương thức tạo sự tương tác giữa các đặc tính (Giả sử: Đặc tính đi trên băng trơn <code>PlayerState.on_ice</code> sẽ quyết định vận tốc tối đa của <code>PlayerMove.vel_x_max</code>)</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Player</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// Elden ring</span>
    <span class="token keyword keyword-int">int</span> hp <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> hp_max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> mp <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> mp_max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

    <span class="token comment">// ================== META ===================</span>
    <span class="token keyword keyword-bool">bool</span> MAIN<span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> INDEX<span class="token punctuation">;</span>
    Input INPUT<span class="token punctuation">;</span>
    Hud HUD <span class="token operator">=</span> <span class="token function">Hud</span><span class="token punctuation">(</span><span class="token keyword keyword-this">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Multiplayer <span class="token operator">*</span>MULTI<span class="token punctuation">;</span>

    <span class="token comment">// ================ STATE ====================</span>
    PlayerState state<span class="token punctuation">;</span>

    <span class="token comment">// ============ MOVEMENT/COMBAT ==============</span>
    PlayerMoveset moveset<span class="token punctuation">;</span>
    PlayerMoving move <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    PlayerJumping jump <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    PlayerAirDash a_dash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    PlayerGroundDash g_dash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    PlayerCombat combat <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// ============== CAMERA/DRAW ================</span>
    PlayerSprite psprite <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// To avoid conflict with sprite</span>
    PlayerCamera camera <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// ============== SOUND EFFECT ===============</span>
    PlayerSFX sfx <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// ============== DEVELOPER ==================</span>
    PlayerDeveloper dev <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword keyword-this">this</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// Constructor</span>
    <span class="token operator">~</span><span class="token function">Player</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Player</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> mc <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Stop Player Current State</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setStatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ========================= PLAYER LOGIC =========================</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerMovement</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerCombat</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerHitBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerGetHit</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> dmg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerUpdate</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="2-khối-hộp-block">2. Khối hộp [<code>Block</code>] </h3>
<h4 id="khối-nhỏ-struct-blockrect">Khối nhỏ <code>struct BlockRect</code> </h4>
<ul>
<li>Mỗi một khối hộp được cấu thành từ nhiều khối nhỏ với kích cỡ <code>64x64</code>, để quản lý từng khối nhỏ như vậy cần có sự tồn tại của một thành phần mang tên <code>struct BlockRect</code> với mục đích lưu giữ thông tin của các khối nhỏ đó: <code>texture</code>, <code>index</code>, <code>path</code></li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">BlockRect</span>
<span class="token punctuation">{</span>
    SDL_Texture <span class="token operator">*</span>texture<span class="token punctuation">;</span>
    SDL_Rect <span class="token operator">*</span>rect<span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> index<span class="token punctuation">;</span>
    string0D path<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="trạng-thái-khối-struct-blockstate">Trạng thái khối <code>struct BlockState</code> </h4>
<ul>
<li>Trạng thái tương tác với người chơi của khối</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">BlockState</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Condition</span>
    <span class="token keyword keyword-bool">bool</span> moving <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> stepOn <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-short">short</span> hugged <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// -1: left, 1: right</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="khối-tổng-bộ-class-block">Khối tổng bộ <code>class Block</code> </h4>
<ul>
<li>Gồm <code>BlockRect</code> và <code>BlockState</code></li>
<li>Gồm các thuộc tính đặc trưng của <code>block</code> như:
<ul>
<li>Thể loại <code>type</code></li>
<li>Độ xuyên thấu <code>alpha</code> (dành cho block hiện hình)</li>
</ul>
</li>
<li>Gồm các thao tác logic</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Block</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// Sprite handler</span>
    SDLTexture2D textures<span class="token punctuation">;</span>
    SDLRect2D rects<span class="token punctuation">;</span>
    bool2D noRenders<span class="token punctuation">;</span>
    int2D indexs<span class="token punctuation">;</span>
    string1D paths<span class="token punctuation">;</span>

    <span class="token comment">// Default</span>
    <span class="token keyword keyword-short">short</span> grid <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> seeAlpha <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>

    <span class="token comment">// 0:Solid</span>
    <span class="token comment">// 1:Ice</span>
    <span class="token comment">// 2:GoThrough</span>
    <span class="token comment">// 3:Bridge</span>
    <span class="token comment">// 4:Water</span>
    <span class="token comment">// 5:SeeThrough</span>
    <span class="token comment">// 6:TEXTURE</span>
    <span class="token keyword keyword-short">short</span> type <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// State</span>
    BlockState state<span class="token punctuation">;</span>

    <span class="token comment">// Condition</span>
    <span class="token keyword keyword-bool">bool</span> can_hug <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token comment">// Movement</span>
    <span class="token keyword keyword-float">float</span> vel_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> vel_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// Developer</span>
    <span class="token keyword keyword-bool">bool</span> highlight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>highlight_texture<span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> isValid <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> needReset <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token operator">~</span><span class="token function">Block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Block</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Read From File</span>
    <span class="token function">Block</span><span class="token punctuation">(</span>float1D main_val<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Simple</span>
    <span class="token function">Block</span><span class="token punctuation">(</span><span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> w<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> h<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> type <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> gr <span class="token operator">=</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Simple (with predefined index)</span>
    <span class="token function">Block</span><span class="token punctuation">(</span><span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> t<span class="token punctuation">,</span> int2D b_index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Block Engine</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">blockEngine</span><span class="token punctuation">(</span>string1D sPath<span class="token punctuation">,</span> int2D bIndex <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    BlockGrid <span class="token function">getGrid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">setHighlight</span><span class="token punctuation">(</span><span class="token keyword keyword-short">short</span> hl <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setBlockIndexs</span><span class="token punctuation">(</span>int2D newIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">blockSeethrough</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> yes <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">blockCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">,</span> PlayerState <span class="token operator">&amp;</span>pState<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">drawProp</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">drawHighlight</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ============================ BLOCK MANIPULATION =============================</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">refreshTexture</span><span class="token punctuation">(</span>string1D sPath <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">tileEdit</span><span class="token punctuation">(</span>string1D sPath<span class="token punctuation">,</span> int1D tIndex<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> bIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">overlap</span><span class="token punctuation">(</span>int2D overlap<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> offX<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> offY<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h5 id="star-phương-thức-blockengine-khởi-tạo-các-block-nhỏ-rồi-ghép-chúng-với-nhau-để-tạo-nên-một-block-hoàn-chỉnh"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋆</mo></mrow><annotation encoding="application/x-tex">\star</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4653em;"></span><span class="mord">⋆</span></span></span></span> Phương thức BlockEngine: khởi tạo các block nhỏ rồi ghép chúng với nhau để tạo nên một block hoàn chỉnh </h5>
<h3 id="3-thao-tác-khối-hộp-blocktemplate">3. Thao tác khối hộp [<code>BlockTemplate</code>] </h3>
<ul>
<li>Chứa các phương thức làm việc với <code>block</code> như là tách, hợp, kéo dài, so sánh, ...</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">BlockTemplate</span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// ================ Block Manipulation =================</span>

    <span class="token comment">// Get A Column (Why not also Row? Are you fucking stupid)</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">getColumn</span><span class="token punctuation">(</span>int2D vec<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> col_index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Split</span>
    <span class="token keyword keyword-static">static</span> Block1D <span class="token function">splitX</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> Block1D <span class="token function">splitY</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> Block1D <span class="token function">split</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Compare (for sorting algorithm)</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">compareX</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block1<span class="token punctuation">,</span> Block <span class="token operator">*</span>block2<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> descend <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-bool">bool</span> <span class="token function">compareY</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block1<span class="token punctuation">,</span> Block <span class="token operator">*</span>block2<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> descend <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Swap Index</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">replaceIndex</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> pre<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> post<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Expand</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">expandX</span><span class="token punctuation">(</span>int2D original<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> cols<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">expandY</span><span class="token punctuation">(</span>int2D original<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Merge 2 </span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">mergeX</span><span class="token punctuation">(</span>int2D vec1<span class="token punctuation">,</span> int2D vec2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">mergeY</span><span class="token punctuation">(</span>int2D vec1<span class="token punctuation">,</span> int2D vec2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Also Merge 2 but more convenient for my fucking console</span>
    <span class="token keyword keyword-static">static</span> Block <span class="token operator">*</span><span class="token function">mergeBlockX</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>blockMain<span class="token punctuation">,</span> Block <span class="token operator">*</span>blockSub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> Block <span class="token operator">*</span><span class="token function">mergeBlockY</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>blockMain<span class="token punctuation">,</span> Block <span class="token operator">*</span>blockSub<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Merge 3</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">mergeX2</span><span class="token punctuation">(</span>int2D vecPre<span class="token punctuation">,</span> int2D vecCur<span class="token punctuation">,</span> int2D vecPost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">mergeY2</span><span class="token punctuation">(</span>int2D vecPre<span class="token punctuation">,</span> int2D vecCur<span class="token punctuation">,</span> int2D vecPost<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// MERGE SUPER!!!</span>
    <span class="token keyword keyword-static">static</span> Block1D <span class="token function">mergeGlobal</span><span class="token punctuation">(</span>Block1D oldVec<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> mergeRow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Rectangle Template</span>
    <span class="token keyword keyword-static">static</span> int2D <span class="token function">rect</span><span class="token punctuation">(</span>int2D vecSqr<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> row<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ================ File/Map Manipulation =================</span>

    <span class="token comment">// Generate Block Code (.csv)</span>
    <span class="token keyword keyword-static">static</span> string0D <span class="token function">blockToCode</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Generate Block Info From Code</span>
    <span class="token keyword keyword-static">static</span> float2D <span class="token function">codeToBlockInfo</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Append Block To Map Based On File</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">appendBlock</span><span class="token punctuation">(</span>
        Map <span class="token operator">*</span>map<span class="token punctuation">,</span> string0D block_dir<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> type <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="4-địch-enemy">4. Địch [<code>Enemy</code>] </h3>
<ul>
<li><code>class Enemy</code> kế thừa từ <code>class Object2D</code>, là khuôn mẫu cho các loại kẻ địch khác nhau. Vì vậy nên các hàm được sử dụng là hàm ảo (khởi tạo, vẽ, AI, logic), setters, getters và hàm cập nhật.</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Enemy</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token comment">// Standard stat</span>
    <span class="token keyword keyword-int">int</span> hp<span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> invincible_time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// death come to us all :(</span>
    <span class="token keyword keyword-bool">bool</span> dead <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    
    <span class="token keyword keyword-int">int</span> collide_damage <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">Enemy</span><span class="token punctuation">(</span>  <span class="token keyword keyword-float">float</span> X <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> w <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> h <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hw <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hh <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token keyword keyword-int">int</span> sw <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sh <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sim <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sfm <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">initEnemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">enemyAI</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-virtual">virtual</span> <span class="token keyword keyword-void">void</span> <span class="token function">enemyGetHit</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> dmg<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">updateEnemy</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Getter</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getHp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">getDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getInvinTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getCollideDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Setter</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setHp</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setDead</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setInvinTime</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setCollideDamage</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> dmg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="5-cửa-door">5. Cửa [<code>Door</code>] </h3>
<ul>
<li><code>class Door</code> kế thừa từ <code>Object2D</code>, quản lý việc dịch chuyển người chơi trong map và world.</li>
</ul>
<h4 id="địa-điểm-thế-giới">Địa điểm thế giới </h4>
<ul>
<li>Là vị trí trên thế giới, gồm <code>id map</code> và vị trí <code>x, y</code></li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">WorldLocation</span>
<span class="token punctuation">{</span> 
    <span class="token keyword keyword-int">int</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> sX<span class="token punctuation">,</span> sY<span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> snap <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-bool">bool</span> invalid <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="địa-điểm-dịch-chuyển">Địa điểm dịch chuyển </h4>
<ul>
<li>Là vùng khi mà người chơi bước vào sẽ thực hiện việc dịch chuyển sang địa điểm thế giới <code>WorldLocation</code> mới</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">MapTransit</span>
<span class="token punctuation">{</span>
    ObjectBox box<span class="token punctuation">;</span>
    WorldLocation location<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="cửa">Cửa </h4>
<ul>
<li>Quản lý việc dịch chuyển người chơi trong <code>map</code> và <code>world</code></li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Door</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> style <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> handle_left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    WorldLocation location<span class="token punctuation">;</span>

    <span class="token comment">// DOOOR STUCK, DOOR STUCKKKK, PLEASE I BEG YOU</span>
    <span class="token keyword keyword-int">int</span> need_star <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> lock_alpha <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    SDL_Rect doorRect<span class="token punctuation">,</span> lockRect<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>door_texture<span class="token punctuation">,</span> <span class="token operator">*</span>lock_texture<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">Door</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Door</span><span class="token punctuation">(</span>DoorObject door<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Door</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> style<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> h_left<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span>
        <span class="token keyword keyword-int">int</span> m_index<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> spawnX<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> spawnY<span class="token punctuation">,</span>
        <span class="token keyword keyword-int">int</span> star <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">initDoor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> star<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> <span class="token function">getStar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">drawProp</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-static">static</span> Door <span class="token operator">*</span><span class="token function">codeToDoorInfo</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">appendDoor</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> string0D door_dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="6-bong-bóng-bubble">6. Bong bóng [<code>Bubble</code>] </h3>
<ul>
<li>Bong bóng chat</li>
</ul>
<h4 id="-struct-bubblestyle"># <code>struct BubbleStyle</code> </h4>
<ul>
<li>Chứa các giá trị phục vụ mục đích tạo hiệu ứng hiện hình của bong bóng</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">BubbleStyle</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Max Value (for initialization)</span>
    <span class="token keyword keyword-int">int</span> maxOffX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        maxOffY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> maxAlpha <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token comment">// Current Value (for runtime)</span>
    <span class="token keyword keyword-int">int</span> curOffX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        curOffY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> curAlpha <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-float">float</span> <span class="token function">alphaRatio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="-struct-bubbleobject"># <code>struct BubbleObject</code> </h4>
<ul>
<li>Chứa các thông tin về bubble</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-struct">struct</span> <span class="token class-name">BubbleObject</span>
<span class="token punctuation">{</span>
    SDL_Texture <span class="token operator">*</span>texture<span class="token punctuation">;</span>
    BubbleStyle style<span class="token punctuation">;</span>

    SDL_Rect desRect<span class="token punctuation">;</span>

    <span class="token comment">// ~BubbleObject();</span>
    <span class="token comment">// == Update ==</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Bubble <span class="token operator">*</span>bubble<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">drawProp</span><span class="token punctuation">(</span>Bubble <span class="token operator">*</span>bubble<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h4 id="-class-bubble"># <code>class Bubble</code> </h4>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Bubble</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    string0D bubble_path<span class="token punctuation">;</span>
    BubbleObject1D bubble_objs<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token keyword keyword-short">short</span> type<span class="token punctuation">;</span>
    BubbleStyle style<span class="token punctuation">;</span>
    ObjectBox active_box<span class="token punctuation">;</span>

    <span class="token operator">~</span><span class="token function">Bubble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Bubble</span><span class="token punctuation">(</span> string0D bPath<span class="token punctuation">,</span> ObjectHitbox bHitbox<span class="token punctuation">,</span>
            ObjectBox bActivebox<span class="token punctuation">,</span> BubbleStyle bStyle<span class="token punctuation">,</span>
            <span class="token keyword keyword-short">short</span> type <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> grid <span class="token operator">=</span> <span class="token number">64</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">update</span><span class="token punctuation">(</span>Multiplayer <span class="token operator">*</span>multi<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Multiplayer <span class="token operator">*</span>multi<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// File Manip</span>
    <span class="token keyword keyword-static">static</span> Bubble <span class="token operator">*</span><span class="token function">codeToBubbleInfo</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">appendBubble</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> string0D bubble_dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="7-trang-trí-decoration">7. Trang trí [<code>Decoration</code>] </h3>
<ul>
<li>
<p><code>class Decoration</code> là con của <code>Object2D</code>, với các thuộc tính riêng như:</p>
<ul>
<li>Độ alpha, loại decor.</li>
<li>Đường dẫn, khung.</li>
<li>Tọa độ trên sprite sheet, tọa độ được vẽ lên trên cửa sổ.</li>
<li>Texture chứa sprite sheet.</li>
<li>Tỉ lệ rộng/cao, giá trị x thêm vào, tỉ lệ vận tốc (giúp décor di chuyển với tốc độ khác người chơi)</li>
</ul>
</li>
<li>
<p>Các phương thức của class:</p>
<ul>
<li>Các phương thức khởi tạo riêng cho các trường hợp (background, static, animated standard, animated advance)</li>
<li>Các setter, getter, hàm init.</li>
<li>Phương thức vẽ, vẽ nền, cập nhật trong lúc chạy.</li>
<li>Các phương thức làm việc với file.</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Decoration</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-int">int</span> alpha <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-short">short</span> type <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    string0D decor_path<span class="token punctuation">;</span>
    string0D decor_frame <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>

    SDL_Rect desRect<span class="token punctuation">,</span> srcRect<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>decor_texture<span class="token punctuation">;</span>
    SDLTexture1D decor_textures<span class="token punctuation">;</span>

    <span class="token keyword keyword-float">float</span>   w_h_ratio <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span>   add_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span>   scale_vel_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
            scale_vel_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token comment">// Destructor</span>
    <span class="token operator">~</span><span class="token function">Decoration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// File Manip Decoration</span>
    <span class="token function">Decoration</span><span class="token punctuation">(</span>DecorObject decor_obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Background</span>
    <span class="token function">Decoration</span><span class="token punctuation">(</span>string0D dPath<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> whRatio<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> scaleVelX <span class="token operator">=</span> <span class="token number">.1</span><span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> scaleVelY <span class="token operator">=</span> <span class="token number">.1</span><span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> velX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> bg <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Static Decoration</span>
    <span class="token function">Decoration</span><span class="token punctuation">(</span>string0D dPath<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> w<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Standard Animated Decoration</span>
    <span class="token function">Decoration</span><span class="token punctuation">(</span>string0D dPath<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> w<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> h<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sh<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sim<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sfm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Advance Animated Decoration</span>
    <span class="token function">Decoration</span><span class="token punctuation">(</span>string0D dPath<span class="token punctuation">,</span> string0D fPath<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> w<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> h<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sim<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sfm<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-float">float</span> <span class="token function">getAddX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> <span class="token function">getSclVelX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> <span class="token function">getSclVelY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">setAbs</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> ab<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setAlpha</span><span class="token punctuation">(</span><span class="token keyword keyword-int">int</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">initDecoration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Decoration</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">drawProp</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Background</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">updateBackground</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> left_prlx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">drawBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// File manip</span>
    <span class="token keyword keyword-static">static</span> Decoration <span class="token operator">*</span><span class="token function">codeToDecorInfo</span><span class="token punctuation">(</span>string0D str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">appendDecor</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> string0D decor_dir<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> front <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">appendBackground</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> string0D bg_dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="8-đạn-projectile">8. Đạn [<code>Projectile</code>] </h3>
<ul>
<li><code>class Projectile</code> kế thừa từ <code>Object2D</code>, là các vật thể đạn trong game.</li>
<li>Các thuộc tính bao gồm có thể làm giảm máu của địch hay người chơi, đi xuyên tường, địch, có thể được phản lại hay không, biến mất hoặc bị phản lại hay chưa, sát thương, vận tốc, đường dẫn đến asset và texture.</li>
<li>Các phương thức bao gồm:
<ul>
<li>Các hàm khởi tạo cho mỗi loại đạn.</li>
<li>Setters, getters.</li>
<li>Xử lý va chạm với các vật thể khác.</li>
<li>Xử lý vận tốc, cập nhật, vẽ đạn.</li>
</ul>
</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">Projectile</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-bool">bool</span> harm_player<span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> harm_enemy<span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> can_pierce <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> can_wall <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> can_parry <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-bool">bool</span> bullet_dead <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> bullet_parried <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-int">int</span> bullet_age <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> bullet_damage <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> vel_parry_x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> vel_parry_y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    string0D proj_path<span class="token punctuation">;</span>
    SDL_Rect desRect<span class="token punctuation">,</span> srcRect<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>proj_texture<span class="token punctuation">;</span>

    <span class="token comment">// Fun but unnecessary</span>
    <span class="token keyword keyword-int">int</span> parry_effect <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">Projectile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Standard Projectile (can parry, no wall, no pierce)</span>
    <span class="token function">Projectile</span><span class="token punctuation">(</span>string0D pPath<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hh<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sh<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> velX<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> velY<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> accelX<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> accelY<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> dmg<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> age<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> harm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Customizable No Animation Projectile</span>
    <span class="token function">Projectile</span><span class="token punctuation">(</span>string0D pPath<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hh<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sh<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> velX<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> velY<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> accelX<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> accelY<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> dmg<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> age<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> harm<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> parry<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> pierce<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> thruWall<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Customizable Yes Animation Projectile</span>
    <span class="token function">Projectile</span><span class="token punctuation">(</span>string0D pPath<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> hh<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sh<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> velX<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> velY<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> accelX<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> accelY<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> dmg<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> age<span class="token punctuation">,</span> <span class="token keyword keyword-short">short</span> harm<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> parry<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> pierce<span class="token punctuation">,</span> <span class="token keyword keyword-bool">bool</span> thruWall<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sim<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sfm<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// some things</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-float">float</span> <span class="token function">generateRandomFloat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Getter</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">getBulletDead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">getBulletParried</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Setter</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">setBulletDead</span><span class="token punctuation">(</span><span class="token keyword keyword-bool">bool</span> dead<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// ================== Deadly =======================</span>
    <span class="token comment">// Harm the environment (not really, they immortal)</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">blockCollision</span><span class="token punctuation">(</span>Block <span class="token operator">*</span>block<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Harm you</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">playerCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Harm them</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">enemyCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Harmful in general (lookin at you America)</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">projectileCollision</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// =================== Velocity ====================</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">projectileAction</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// =================== Update ======================</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">updateProjectile</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// =================== Draw ====-===================</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="9-hiệu-ứng-particleeffect">9. Hiệu ứng [ParticleEffect] </h3>
<ul>
<li><code>class ParticleEffect</code> kế thừa từ <code>Object2D</code>, quản lý các hiệu ứng trong game, với các thuộc tính để quản lý trạng thái mỗi hiệu ứng. Các phương thức vẽ được sử dụng ở đây cùng 1 getter để xét hiệu ứng đã biến mất hay chưa.</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">ParticleEffect</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-bool">bool</span> is_gone <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> can_repeat <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    SDL_Rect desRect<span class="token punctuation">,</span> srcRect<span class="token punctuation">;</span>
    SDL_Texture <span class="token operator">*</span>pe_texture<span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token operator">~</span><span class="token function">ParticleEffect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">ParticleEffect</span><span class="token punctuation">(</span> SDL_Texture <span class="token operator">*</span>peTxture<span class="token punctuation">,</span>
                    <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> w<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> h<span class="token punctuation">,</span> <span class="token comment">// Position/Size in game</span>
                    <span class="token keyword keyword-int">int</span> sw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sh<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sim<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sfm<span class="token punctuation">,</span> <span class="token comment">// Animation properties</span>
                    <span class="token keyword keyword-bool">bool</span> repeat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">ParticleEffect</span><span class="token punctuation">(</span> SDL_Texture <span class="token operator">*</span>peTxture<span class="token punctuation">,</span>
                    <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> w<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> h<span class="token punctuation">,</span> <span class="token comment">// Position/Size in game</span>
                    <span class="token keyword keyword-int">int</span> sw<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sh<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sim<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> srm<span class="token punctuation">,</span> <span class="token keyword keyword-int">int</span> sfm<span class="token punctuation">,</span> <span class="token comment">// Animation properties</span>
                    <span class="token keyword keyword-bool">bool</span> repeat<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> <span class="token function">getIsGone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-void">void</span> <span class="token function">drawProp</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">draw</span><span class="token punctuation">(</span>Player <span class="token operator">*</span>player<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 id="10-vật-thể-âm-thanh-audioobject">10. Vật thể âm thanh [<code>AudioObject</code>] </h3>
<ul>
<li><code>class AudioObject</code> kế thừa từ <code>Object2D</code>, quản lý các vật thể khi tiếp xúc sẽ chạy đoạn âm thanh nhất định.</li>
</ul>
<pre data-role="codeBlock" data-info="cpp" class="language-cpp cpp"><code><span class="token keyword keyword-class">class</span> <span class="token class-name">AudioObject</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword keyword-public">public</span> <span class="token class-name">Object2D</span></span>
<span class="token punctuation">{</span>
<span class="token keyword keyword-private">private</span><span class="token operator">:</span>
    <span class="token keyword keyword-float">float</span> radius <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> radius_override <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-float">float</span> radius_max_vol <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    sf<span class="token double-colon punctuation">::</span>Music music<span class="token punctuation">;</span>

    <span class="token keyword keyword-bool">bool</span> play_once <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-bool">bool</span> is_loop <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> volume <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-int">int</span> vol_max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword keyword-public">public</span><span class="token operator">:</span>
    <span class="token function">AudioObject</span><span class="token punctuation">(</span>string0D path<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> X<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> Y<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> R<span class="token punctuation">,</span>
                <span class="token keyword keyword-float">float</span> maxvolR<span class="token punctuation">,</span> <span class="token keyword keyword-float">float</span> <span class="token keyword keyword-override">override</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-void">void</span> <span class="token function">updateProximity</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-static">static</span> <span class="token keyword keyword-void">void</span> <span class="token function">appendAudioObject</span><span class="token punctuation">(</span>Map <span class="token operator">*</span>map<span class="token punctuation">,</span> string0D a_dir<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
      </div>
      
      
    
    
    
    
    
    
  
    </body></html>